(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c89a8576"],{"04d1":function(e,t,n){var o=n("342f"),r=o.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},"136c":function(e,t,n){e.exports=n.p+"img/logo.bd204563.svg"},"26e9":function(e,t,n){"use strict";var o=n("23e7"),r=n("e8b5"),c=[].reverse,i=[1,2];o({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),c.call(this)}})},2804:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"h",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return p}));var o=n("1da1"),r=(n("96cf"),n("d3b7"),n("4de4"),n("c975"),n("4e82"),n("0d03"),n("25f0"),n("de46")),c=n("62d8"),i=n("1e1c"),a=n("3fd4"),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"默认房间名";return new Promise((function(n){Object(r["a"])("createRoom",{uid:e,subject:t}).then((function(e){var t=e.ret,o=e.data;t&&0===t.code&&n(o)}))}))},s=function(e,t,n,o,c){return new Promise((function(i,u){var s=o;2===o&&c>=3&&(s=1,Object(a["a"])({customClass:"alert-box",message:"最多支持3名观众连麦"})),Object(r["a"])("responseOnstageInvite",{uid:e,room_id:t,invite_token:n,respond:s}).then((function(e){var t=e.ret;0===t.code?i(2===s):u(2===s)}))["catch"]((function(){u(2===s)}))}))},d=function(e,t){return new Promise((function(n){Object(r["a"])("getStatefulList",{uid:e,room_id:t}).then((function(e){var t=e.ret,o=e.data;if(0===t.code){var r=o.attendee_list.filter((function(e,t,n){return n.indexOf(e,0)===t}));n(r)}else n([])}))["catch"]((function(){n([])}))}))},l=function(e){var t=e.uid,n=e.room_id,o=e.target_uid,c=e.mic,i=e.on_stage,a=e.type;return new Promise((function(e,u){Object(r["a"])("setUserInfo",{uid:t,room_id:n,target_uid:o,mic:c,on_stage:i,type:a}).then((function(t){var n=t.ret;0===n.code?e():u()}))["catch"]((function(){u()}))}))},f=function(e,t,n){return new Promise((function(o,c){Object(r["a"])("operateRaiseHand",{uid:e,room_id:t,type:n}).then((function(e){var t=e.ret;0===t.code?o():c()}))["catch"]((function(){c()}))}))},b=function(e,t,n){return new Promise((function(o,c){Object(r["a"])("inviteOnstage",{uid:e,room_id:t,target_uid:n}).then((function(e){var t=e.ret;0===t.code?o():c(t.message)}))["catch"]((function(e){c(e)}))}))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return new Promise((function(n,o){Object(r["a"])("roomList",{uid:e,count:t}).then((function(e){var t=e.ret,r=e.data;0===(null===t||void 0===t?void 0:t.code)?n(r.room_list):o([])}))["catch"]((function(){o([])}))}))},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return new Promise((function(c){Object(r["a"])("getAttendeeList",{room_id:e,uid:t,page:n,page_size:o}).then((function(e){var n,o=e.ret,r=e.data;0===(null===o||void 0===o?void 0:o.code)&&(null===r||void 0===r||null===(n=r.attendee_list)||void 0===n||n.sort((function(e,n){return 3===e.role?-1/0:3===n.role?1/0:e.uid===t?-1e3:n.uid===t?1e3:e.onstage_state===n.onstage_state?e.onstage_timestamp-n.onstage_timestamp:n.onstage_state-e.onstage_state})),c(r.attendee_list))}))}))},g=function(e,t,n){return new Promise((function(o,a){Object(r["a"])("loginRoom",{uid:e.uid,room_id:t}).then((function(r){var u,s=r.ret,d=r.data;0===(null===s||void 0===s?void 0:s.code)||80004===(null===s||void 0===s?void 0:s.code)?c["d"].loginRoom(t,n,{userID:null===e||void 0===e||null===(u=e.uid)||void 0===u?void 0:u.toString(),userName:e.nick_name},{userUpdate:!0}).then((function(){Object(i["a"])({uid:e.uid,roomId:t}),o({ret:s,data:d})}))["catch"]((function(){a({ret:{code:81e3,message:"直播间已经关闭！返回首页！"},data:null})})):80002===(null===s||void 0===s?void 0:s.code)?a({ret:{code:81e3,message:"直播间已经关闭！返回首页！"},data:null}):a({ret:{code:81001,message:"随机用户已经过期！已为你重新注册"},data:null})}))}))},p=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c["d"].logoutRoom(),e.next=3,Object(r["a"])("quitRoom",{uid:t,room_id:n}).then((function(e){var n=e.ret;0===(null===n||void 0===n?void 0:n.code)&&(sessionStorage.removeItem("room"),Object(i["a"])({uid:t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},4727:function(e,t,n){e.exports=n.p+"img/5-cover@2x.a3df72a8.png"},"4e82":function(e,t,n){"use strict";var o=n("23e7"),r=n("1c0b"),c=n("7b0b"),i=n("50c4"),a=n("d039"),u=n("addb"),s=n("a640"),d=n("04d1"),l=n("d998"),f=n("2d00"),b=n("512c"),m=[],v=m.sort,g=a((function(){m.sort(void 0)})),p=a((function(){m.sort(null)})),j=s("sort"),O=!a((function(){if(f)return f<70;if(!(d&&d>3)){if(l)return!0;if(b)return b<603;var e,t,n,o,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)m.push({k:t+o,v:n})}for(m.sort((function(e,t){return t.v-e.v})),o=0;o<m.length;o++)t=m[o].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),h=g||!p||!j||!O,_=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:String(t)>String(n)?1:-1}};o({target:"Array",proto:!0,forced:h},{sort:function(e){void 0!==e&&r(e);var t=c(this);if(O)return void 0===e?v.call(t):v.call(t,e);var n,o,a=[],s=i(t.length);for(o=0;o<s;o++)o in t&&a.push(t[o]);a=u(a,_(e)),n=a.length,o=0;while(o<n)t[o]=a[o++];while(o<s)delete t[o++];return t}})},"512c":function(e,t,n){var o=n("342f"),r=o.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},8e3:function(e,t,n){e.exports=n.p+"img/3-cover@2x.f8b7f9ee.png"},"9e16":function(e,t,n){e.exports=n.p+"img/4-cover@2x.05d2a46e.png"},addb:function(e,t){var n=Math.floor,o=function(e,t){var i=e.length,a=n(i/2);return i<8?r(e,t):c(o(e.slice(0,a),t),o(e.slice(a),t),t)},r=function(e,t){var n,o,r=e.length,c=1;while(c<r){o=c,n=e[c];while(o&&t(e[o-1],n)>0)e[o]=e[--o];o!==c++&&(e[o]=n)}return e},c=function(e,t,n){var o=e.length,r=t.length,c=0,i=0,a=[];while(c<o||i<r)c<o&&i<r?a.push(n(e[c],t[i])<=0?e[c++]:t[i++]):a.push(c<o?e[c++]:t[i++]);return a};e.exports=o},bba6:function(e,t,n){e.exports=n.p+"img/0-cover@2x.1eda5101.png"},d95b:function(e,t,n){var o={"./0-cover@2x.png":"bba6","./1-cover@2x.png":"edea","./2-cover@2x.png":"eb82","./3-cover@2x.png":"8000","./4-cover@2x.png":"9e16","./5-cover@2x.png":"4727","./6-cover@2x.png":"f4e7","./7-cover@2x.png":"e9cf"};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=c,e.exports=r,r.id="d95b"},d998:function(e,t,n){var o=n("342f");e.exports=/MSIE|Trident/.test(o)},de39:function(e,t,n){},e34a:function(e,t,n){"use strict";n("de39")},e9cf:function(e,t,n){e.exports=n.p+"img/7-cover@2x.405a342d.png"},eb82:function(e,t,n){e.exports=n.p+"img/2-cover@2x.d967b46a.png"},edea:function(e,t,n){e.exports=n.p+"img/1-cover@2x.c0cb027e.png"},f4e7:function(e,t,n){e.exports=n.p+"img/6-cover@2x.e26fe486.png"},fb6a:function(e,t,n){"use strict";var o=n("23e7"),r=n("861d"),c=n("e8b5"),i=n("23cb"),a=n("50c4"),u=n("fc6a"),s=n("8418"),d=n("b622"),l=n("1dde"),f=l("slice"),b=d("species"),m=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,o,d,l=u(this),f=a(l.length),g=i(e,f),p=i(void 0===t?f:t,f);if(c(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!c(n.prototype)?r(n)&&(n=n[b],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(l,g,p);for(o=new(void 0===n?Array:n)(v(p-g,0)),d=0;g<p;g++,d++)g in l&&s(o,d,l[g]);return o.length=d,o}})},fc0d:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=n("136c"),c=n.n(r),i=Object(o["n"])("div",null,[Object(o["n"])("img",{src:c.a}),Object(o["n"])("span",{class:"room-list-title"}," 互动直播")],-1),a=Object(o["n"])("div",{class:"icon-feedback"},null,-1),u=Object(o["m"])("用户协议"),s=Object(o["m"])("隐私协议"),d=Object(o["m"])("关于我们"),l=Object(o["m"])("应用版本 "),f=Object(o["n"])("span",{style:{float:"right"}},"v1.0.0",-1),b=Object(o["m"])("SDK版本 "),m={style:{float:"right"}},v=Object(o["n"])("span",{class:"one-line"},null,-1),g={class:"playing-tag"},p=Object(o["n"])("i",{class:"iconfont icon-litte-micro"},null,-1),j=Object(o["n"])("span",null,"正在直播",-1),O={class:"room-cards"},h={class:"room-cover-container"},_={class:"room-message"},w={class:"subject"},x={class:"room-number"},y=Object(o["n"])("div",{class:"goto-look"},"去观看 >",-1),k={key:1,class:"empty-room"};function C(e,t,r,c,C,R){var A=Object(o["N"])("icon"),L=Object(o["N"])("el-dropdown-item"),S=Object(o["N"])("el-dropdown-menu"),N=Object(o["N"])("el-dropdown"),P=Object(o["N"])("el-header"),E=Object(o["N"])("el-main"),I=Object(o["N"])("el-container");return Object(o["E"])(),Object(o["j"])(I,{class:"room-list"},{default:Object(o["cb"])((function(){return[Object(o["n"])(P,{height:"56px",class:"room-list-header"},{default:Object(o["cb"])((function(){return[i,Object(o["n"])("div",null,[a,Object(o["n"])(N,{trigger:"click",onCommand:e.handleCommand},{dropdown:Object(o["cb"])((function(){return[Object(o["n"])(S,{class:"about-menu about-positon"},{default:Object(o["cb"])((function(){return[Object(o["n"])(L,{command:"userAgreement"},{default:Object(o["cb"])((function(){return[u]})),_:1}),Object(o["n"])(L,{command:"privacyAgreement"},{default:Object(o["cb"])((function(){return[s]})),_:1}),Object(o["n"])(L,{command:"aboutUs"},{default:Object(o["cb"])((function(){return[d]})),_:1}),Object(o["n"])(L,{divided:""},{default:Object(o["cb"])((function(){return[l,f]})),_:1}),Object(o["n"])(L,null,{default:Object(o["cb"])((function(){return[b,Object(o["n"])("span",m,"v"+Object(o["R"])(e.getVersion()),1)]})),_:1})]})),_:1})]})),default:Object(o["cb"])((function(){return[Object(o["n"])(A,{name:"icon_about_normal",style:{"margin-right":"10px"},isButton:!0})]})),_:1},8,["onCommand"]),v,Object(o["n"])("span",{class:"small-button zg-button",onClick:t[1]||(t[1]=function(t){return e.gotoLiveRoom()})},"我要开播")])]})),_:1}),Object(o["n"])(E,{class:"room-card-container"},{default:Object(o["cb"])((function(){var t;return[(null===(t=e.roomList)||void 0===t?void 0:t.length)>0?(Object(o["E"])(),Object(o["j"])(o["b"],{key:0},[Object(o["n"])("div",g,[Object(o["n"])(A,{name:"icon_camrea"}),p,j]),Object(o["n"])("div",O,[(Object(o["E"])(!0),Object(o["j"])(o["b"],null,Object(o["L"])(e.roomList,(function(t){var r;return Object(o["E"])(),Object(o["j"])("div",{key:t.room_id,onClick:function(n){return e.gotoLiveRoom(t)},class:"room-card"},[Object(o["n"])("div",h,[Object(o["n"])("img",{class:"room-cover",src:n("d95b")("./".concat(null===(r=t.creator_name)||void 0===r?void 0:r.picIndex(),"-cover@2x.png"))},null,8,["src"])]),Object(o["n"])("div",_,[Object(o["n"])("p",w,Object(o["R"])(t.subject),1),Object(o["n"])("div",x,[Object(o["n"])("div",null,[Object(o["n"])(A,{name:"icon_people"}),Object(o["n"])("span",null,Object(o["R"])(t.online_count),1)]),y])])],8,["onClick"])})),128))])],64)):(Object(o["E"])(),Object(o["j"])("div",k,"暂无在线房间，快去创建直播间吧"))]})),_:1})]})),_:1})}var R=n("1da1"),A=(n("96cf"),n("fb6a"),n("d3b7"),n("26e9"),n("5502")),L=n("6c02"),S=n("3fd4"),N=n("2804"),P=n("62d8"),E=n("3404"),I=Object(o["o"])({components:{icon:E["a"]},setup:function(){var e=Object(A["b"])(),t=Object(L["d"])(),n=Object(o["J"])([]),r=function(n){e.state.user.uid?e.state.token?n?(e.commit("setter",{key:"room",value:n}),t.push({path:"/liveRoom/".concat(n.room_id)})):S["b"].prompt("","创建直播间",{showInput:!0,customClass:"create-room-message",showCancelButton:!1,confirmButtonClass:"zg-button small-button",confirmButtonText:"创建直播",inputPlaceholder:"请输入直播间名称",inputValidator:function(e){e.length>15&&(e=e.slice(0,15));var t=document.querySelector(".create-room-message .zg-button");return t.style.opacity=e?"1":"0.5",!!e}}).then((function(n){var o=n.value;Object(N["a"])(e.state.user.uid,o).then((function(n){e.commit("setter",{key:"room",value:n}),t.push({path:"/liveRoom/".concat(n.room_id)})}))})):Object(S["a"])({customClass:"alert-box",message:"用户账号token异常！稍后重试！"}):Object(S["a"])({showClose:!1,message:"用户尚未登录",customClass:"alert-box"})},c=Object(o["ab"])((function(){return e.state.user.uid}),function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0!==t&&Object(N["c"])(t).then((function(e){n.value=e.reverse()}))["finally"]((function(){c()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{immediate:!0}),i=function(e){var t="";"userAgreement"===e?t="https://www.zego.im/terms":"privacyAgreement"===e?t="https://www.zego.im/privacy":"aboutUs"===e&&(t="https://www.zego.im/team"),t&&window.open(t,"_blank")};return{roomList:n,gotoLiveRoom:r,getVersion:P["c"],handleCommand:i}}});n("e34a");I.render=C;t["default"]=I}}]);